(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))i(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function a(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function i(d){if(d.ep)return;d.ep=!0;const h=a(d);fetch(d.href,h)}})();var Fi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zi={exports:{}};/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */(function(o,t){(function(a,i){o.exports=i()})(Fi,function(){function a(e,r){var n,s=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),r&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),s.push.apply(s,n)),s}function i(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?a(Object(n),!0).forEach(function(s){var c,u;c=e,u=n[s=s],(s=d(s))in c?Object.defineProperty(c,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[s]=u}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function d(e){return e=function(r,n){if(typeof r!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s===void 0)return(n==="string"?String:Number)(r);if(typeof(s=s.call(r,n||"default"))!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),typeof e=="symbol"?e:e+""}function h(e){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(e)}function p(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,d(s.key),s)}}function g(e){return function(r){if(Array.isArray(r))return y(r)}(e)||function(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}(e)||function(r,n){var s;if(r)return typeof r=="string"?y(r,n):(s=(s=Object.prototype.toString.call(r).slice(8,-1))==="Object"&&r.constructor?r.constructor.name:s)==="Map"||s==="Set"?Array.from(r):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?y(r,n):void 0}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function y(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,s=new Array(r);n<r;n++)s[n]=e[n];return s}var Gt=typeof window<"u"&&window.document!==void 0,w=Gt?window:{},Bt=!(!Gt||!w.document.documentElement)&&"ontouchstart"in w.document.documentElement,Nt=Gt&&"PointerEvent"in w,f="cropper",v="all",x="crop",k="move",S="zoom",Y="e",L="w",j="s",P="n",U="ne",st="nw",Z="se",D="sw",I="".concat(f,"-crop"),G="".concat(f,"-disabled"),_="".concat(f,"-hidden"),pt="".concat(f,"-hide"),Et="".concat(f,"-invisible"),ut="".concat(f,"-modal"),ft="".concat(f,"-move"),ot="".concat(f,"Action"),J="".concat(f,"Preview"),wt="crop",Lt="move",Xt="none",kt="crop",Pt="cropend",_t="cropmove",jt="cropstart",ee="dblclick",ue=Nt?"pointerdown":Bt?"touchstart":"mousedown",fe=Nt?"pointermove":Bt?"touchmove":"mousemove",Ue=Nt?"pointerup pointercancel":Bt?"touchend touchcancel":"mouseup",ye="zoom",Ve="image/jpeg",ki=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Hi=/^data:/,Wi=/^data:image\/jpeg;base64,/,Ii=/^img|canvas$/i,qe={viewMode:0,dragMode:wt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Yi=Number.isNaN||w.isNaN;function H(e){return typeof e=="number"&&!Yi(e)}function $e(e){return 0<e&&e<1/0}function xe(e){return e===void 0}function Ht(e){return h(e)==="object"&&e!==null}var zi=Object.prototype.hasOwnProperty;function Ut(e){if(!Ht(e))return!1;try{var r=e.constructor,n=r.prototype;return r&&n&&zi.call(n,"isPrototypeOf")}catch{return!1}}function ct(e){return typeof e=="function"}var Xi=Array.prototype.slice;function Ge(e){return Array.from?Array.from(e):Xi.call(e)}function Q(e,r){return e&&ct(r)&&(Array.isArray(e)||H(e.length)?Ge(e).forEach(function(n,s){r.call(e,n,s,e)}):Ht(e)&&Object.keys(e).forEach(function(n){r.call(e,e[n],n,e)})),e}var V=Object.assign||function(e){for(var r=arguments.length,n=new Array(1<r?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return Ht(e)&&0<n.length&&n.forEach(function(c){Ht(c)&&Object.keys(c).forEach(function(u){e[u]=c[u]})}),e},Pi=/\.\d*(?:0|9){12}\d*$/;function Vt(e,r){return r=1<arguments.length&&r!==void 0?r:1e11,Pi.test(e)?Math.round(e*r)/r:e}var _i=/^width|height|left|top|marginLeft|marginTop$/;function Tt(e,r){var n=e.style;Q(r,function(s,c){_i.test(c)&&H(s)&&(s="".concat(s,"px")),n[c]=s})}function et(e,r){var n;r&&(H(e.length)?Q(e,function(s){et(s,r)}):e.classList?e.classList.add(r):(n=e.className.trim())?n.indexOf(r)<0&&(e.className="".concat(n," ").concat(r)):e.className=r)}function Dt(e,r){r&&(H(e.length)?Q(e,function(n){Dt(n,r)}):e.classList?e.classList.remove(r):0<=e.className.indexOf(r)&&(e.className=e.className.replace(r,"")))}function qt(e,r,n){r&&(H(e.length)?Q(e,function(s){qt(s,r,n)}):(n?et:Dt)(e,r))}var ji=/([a-z\d])([A-Z])/g;function De(e){return e.replace(ji,"$1-$2").toLowerCase()}function Me(e,r){return Ht(e[r])?e[r]:e.dataset?e.dataset[r]:e.getAttribute("data-".concat(De(r)))}function ie(e,r,n){Ht(n)?e[r]=n:e.dataset?e.dataset[r]=n:e.setAttribute("data-".concat(De(r)),n)}var Ce,Ee,Ke=/\s\s*/,Qe=(Ee=!1,Gt&&(Ce=!1,Nt=function(){},Bt=Object.defineProperty({},"once",{get:function(){return Ee=!0,Ce},set:function(e){Ce=e}}),w.addEventListener("test",Nt,Bt),w.removeEventListener("test",Nt,Bt)),Ee);function bt(e,r,n,s){var c=3<arguments.length&&s!==void 0?s:{},u=n;r.trim().split(Ke).forEach(function(l){var m;Qe||(m=e.listeners)&&m[l]&&m[l][n]&&(u=m[l][n],delete m[l][n],Object.keys(m[l]).length===0&&delete m[l],Object.keys(m).length===0)&&delete e.listeners,e.removeEventListener(l,u,c)})}function gt(e,r,n,s){var c=3<arguments.length&&s!==void 0?s:{},u=n;r.trim().split(Ke).forEach(function(l){var m,b;c.once&&!Qe&&(m=e.listeners,u=function(){delete b[l][n],e.removeEventListener(l,u,c);for(var O=arguments.length,T=new Array(O),M=0;M<O;M++)T[M]=arguments[M];n.apply(e,T)},(b=m===void 0?{}:m)[l]||(b[l]={}),b[l][n]&&e.removeEventListener(l,b[l][n],c),b[l][n]=u,e.listeners=b),e.addEventListener(l,u,c)})}function $t(e,r,n){var s;return ct(Event)&&ct(CustomEvent)?s=new CustomEvent(r,{detail:n,bubbles:!0,cancelable:!0}):(s=document.createEvent("CustomEvent")).initCustomEvent(r,!0,!0,n),e.dispatchEvent(s)}function Fe(e){return e=e.getBoundingClientRect(),{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Te=w.location,Ui=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Ze(e){return e=e.match(Ui),e!==null&&(e[1]!==Te.protocol||e[2]!==Te.hostname||e[3]!==Te.port)}function Je(e){var r="timestamp=".concat(new Date().getTime());return e+(e.indexOf("?")===-1?"?":"&")+r}function ae(c){var r=c.rotate,n=c.scaleX,s=c.scaleY,l=c.translateX,c=c.translateY,u=[],l=(H(l)&&l!==0&&u.push("translateX(".concat(l,"px)")),H(c)&&c!==0&&u.push("translateY(".concat(c,"px)")),H(r)&&r!==0&&u.push("rotate(".concat(r,"deg)")),H(n)&&n!==1&&u.push("scaleX(".concat(n,")")),H(s)&&s!==1&&u.push("scaleY(".concat(s,")")),u.length?u.join(" "):"none");return{WebkitTransform:l,msTransform:l,transform:l}}function ge(s,r){var n=s.pageX,s=s.pageY,c={endX:n,endY:s};return r?c:i({startX:n,startY:s},c)}function Ot(u,l){var n,s=u.aspectRatio,c=u.height,u=u.width,l=1<arguments.length&&l!==void 0?l:"contain",m=$e(u),b=$e(c);return m&&b?(n=c*s,l==="contain"&&u<n||l==="cover"&&n<u?c=u/s:u=c*s):m?c=u/s:b&&(u=c*s),{width:u,height:c}}var ti=String.fromCharCode,Vi=/^data:.*,/;function qi(e){var r,n,s,c,u,l,m,b=new DataView(e);try{if(b.getUint8(0)===255&&b.getUint8(1)===216)for(var O=b.byteLength,T=2;T+1<O;){if(b.getUint8(T)===255&&b.getUint8(T+1)===225){n=T;break}T+=1}if(s=n&&(c=n+10,function(C,N,X){var A="";X+=N;for(var z=N;z<X;z+=1)A+=ti(C.getUint8(z));return A}(b,n+4,4)==="Exif")&&((m=(u=b.getUint16(c))===18761)||u===19789)&&b.getUint16(c+2,m)===42&&8<=(l=b.getUint32(c+4,m))?c+l:s){for(var M,B=b.getUint16(s,m),R=0;R<B;R+=1)if(M=s+12*R+2,b.getUint16(M,m)===274){M+=8,r=b.getUint16(M,m),b.setUint16(M,1,m);break}}}catch{r=1}return r}var Gt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,s=this.options,r=this.container,n=this.cropper,c=Number(s.minContainerWidth),s=Number(s.minContainerHeight),c=(et(n,_),Dt(e,_),{width:Math.max(r.offsetWidth,0<=c?c:200),height:Math.max(r.offsetHeight,0<=s?s:100)});Tt(n,{width:(this.containerData=c).width,height:c.height}),et(e,_),Dt(n,_)},initCanvas:function(){var e=this.containerData,l=this.imageData,r=this.options.viewMode,s=Math.abs(l.rotate)%180==90,n=s?l.naturalHeight:l.naturalWidth,s=s?l.naturalWidth:l.naturalHeight,l=n/s,c=e.width,u=e.height,l=(e.height*l>e.width?r===3?c=e.height*l:u=e.width/l:r===3?u=e.width/l:c=e.height*l,{aspectRatio:l,naturalWidth:n,naturalHeight:s,width:c,height:u});this.canvasData=l,this.limited=r===1||r===2,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(e.width-l.width)/2,l.top=(e.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=V({},l)},limitCanvas:function(e,r){var n=this.options,s=this.containerData,c=this.canvasData,u=this.cropBoxData,l=n.viewMode,m=c.aspectRatio,b=this.cropped&&u;e&&(e=Number(n.minCanvasWidth)||0,n=Number(n.minCanvasHeight)||0,1<l?(e=Math.max(e,s.width),n=Math.max(n,s.height),l===3&&(e<n*m?e=n*m:n=e/m)):0<l&&(e?e=Math.max(e,b?u.width:0):n?n=Math.max(n,b?u.height:0):b&&((e=u.width)<(n=u.height)*m?e=n*m:n=e/m)),e=(m=Ot({aspectRatio:m,width:e,height:n})).width,n=m.height,c.minWidth=e,c.minHeight=n,c.maxWidth=1/0,c.maxHeight=1/0),r&&((b?0:1)<l?(m=s.width-c.width,e=s.height-c.height,c.minLeft=Math.min(0,m),c.minTop=Math.min(0,e),c.maxLeft=Math.max(0,m),c.maxTop=Math.max(0,e),b&&this.limited&&(c.minLeft=Math.min(u.left,u.left+(u.width-c.width)),c.minTop=Math.min(u.top,u.top+(u.height-c.height)),c.maxLeft=u.left,c.maxTop=u.top,l===2)&&(c.width>=s.width&&(c.minLeft=Math.min(0,m),c.maxLeft=Math.max(0,m)),c.height>=s.height)&&(c.minTop=Math.min(0,e),c.maxTop=Math.max(0,e))):(c.minLeft=-c.width,c.minTop=-c.height,c.maxLeft=s.width,c.maxTop=s.height))},renderCanvas:function(e,r){var n,s,c,u,l=this.canvasData,m=this.imageData;r&&(r={width:m.naturalWidth*Math.abs(m.scaleX||1),height:m.naturalHeight*Math.abs(m.scaleY||1),degree:m.rotate||0},m=r.width,u=r.height,r=r.degree,n=(r=Math.abs(r)%180)==90?{width:u,height:m}:(s=r%90*Math.PI/180,n=Math.sin(s),c=m*(s=Math.cos(s))+u*n,m=m*n+u*s,90<r?{width:m,height:c}:{width:c,height:m}),s=l.width*((u=n.width)/l.naturalWidth),c=l.height*((r=n.height)/l.naturalHeight),l.left-=(s-l.width)/2,l.top-=(c-l.height)/2,l.width=s,l.height=c,l.aspectRatio=u/r,l.naturalWidth=u,l.naturalHeight=r,this.limitCanvas(!0,!1)),(l.width>l.maxWidth||l.width<l.minWidth)&&(l.left=l.oldLeft),(l.height>l.maxHeight||l.height<l.minHeight)&&(l.top=l.oldTop),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),this.limitCanvas(!1,!0),l.left=Math.min(Math.max(l.left,l.minLeft),l.maxLeft),l.top=Math.min(Math.max(l.top,l.minTop),l.maxTop),l.oldLeft=l.left,l.oldTop=l.top,Tt(this.canvas,V({width:l.width,height:l.height},ae({translateX:l.left,translateY:l.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var r=this.canvasData,n=this.imageData,s=n.naturalWidth*(r.width/r.naturalWidth),c=n.naturalHeight*(r.height/r.naturalHeight);V(n,{width:s,height:c,left:(r.width-s)/2,top:(r.height-c)/2}),Tt(this.image,V({width:n.width,height:n.height},ae(V({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var n=this.options,e=this.canvasData,r=n.aspectRatio||n.initialAspectRatio,n=Number(n.autoCropArea)||.8,s={width:e.width,height:e.height};r&&(e.height*r>e.width?s.height=s.width/r:s.width=s.height*r),this.cropBoxData=s,this.limitCropBox(!0,!0),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),s.width=Math.max(s.minWidth,s.width*n),s.height=Math.max(s.minHeight,s.height*n),s.left=e.left+(e.width-s.width)/2,s.top=e.top+(e.height-s.height)/2,s.oldLeft=s.left,s.oldTop=s.top,this.initialCropBoxData=V({},s)},limitCropBox:function(e,r){var n,s,c=this.options,u=this.containerData,l=this.canvasData,m=this.cropBoxData,b=this.limited,O=c.aspectRatio;e&&(e=Number(c.minCropBoxWidth)||0,c=Number(c.minCropBoxHeight)||0,n=b?Math.min(u.width,l.width,l.width+l.left,u.width-l.left):u.width,s=b?Math.min(u.height,l.height,l.height+l.top,u.height-l.top):u.height,e=Math.min(e,u.width),c=Math.min(c,u.height),O&&(e&&c?e<c*O?c=e/O:e=c*O:e?c=e/O:c&&(e=c*O),n<s*O?s=n/O:n=s*O),m.minWidth=Math.min(e,n),m.minHeight=Math.min(c,s),m.maxWidth=n,m.maxHeight=s),r&&(b?(m.minLeft=Math.max(0,l.left),m.minTop=Math.max(0,l.top),m.maxLeft=Math.min(u.width,l.left+l.width)-m.width,m.maxTop=Math.min(u.height,l.top+l.height)-m.height):(m.minLeft=0,m.minTop=0,m.maxLeft=u.width-m.width,m.maxTop=u.height-m.height))},renderCropBox:function(){var e=this.options,r=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&ie(this.face,ot,n.width>=r.width&&n.height>=r.height?k:v),Tt(this.cropBox,V({width:n.width,height:n.height},ae({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),$t(this.element,kt,this.getData())}},Nt={initPreview:function(){var e=this.element,r=this.crossOrigin,n=this.options.preview,s=r?this.crossOriginUrl:this.url,c=e.alt||"The image to preview",u=document.createElement("img");r&&(u.crossOrigin=r),u.src=s,u.alt=c,this.viewBox.appendChild(u),this.viewBoxImage=u,n&&(typeof(u=n)=="string"?u=e.ownerDocument.querySelectorAll(n):n.querySelector&&(u=[n]),Q(this.previews=u,function(l){var m=document.createElement("img");ie(l,J,{width:l.offsetWidth,height:l.offsetHeight,html:l.innerHTML}),r&&(m.crossOrigin=r),m.src=s,m.alt=c,m.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',l.innerHTML="",l.appendChild(m)}))},resetPreview:function(){Q(this.previews,function(n){var r=Me(n,J),r=(Tt(n,{width:r.width,height:r.height}),n.innerHTML=r.html,n),n=J;if(Ht(r[n]))try{delete r[n]}catch{r[n]=void 0}else if(r.dataset)try{delete r.dataset[n]}catch{r.dataset[n]=void 0}else r.removeAttribute("data-".concat(De(n)))})},preview:function(){var e=this.imageData,r=this.canvasData,n=this.cropBoxData,s=n.width,c=n.height,u=e.width,l=e.height,m=n.left-r.left-e.left,b=n.top-r.top-e.top;this.cropped&&!this.disabled&&(Tt(this.viewBoxImage,V({width:u,height:l},ae(V({translateX:-m,translateY:-b},e)))),Q(this.previews,function(O){var M=Me(O,J),T=M.width,M=M.height,B=T,R=M,C=1;s&&(R=c*(C=T/s)),c&&M<R&&(B=s*(C=M/c),R=M),Tt(O,{width:B,height:R}),Tt(O.getElementsByTagName("img")[0],V({width:u*C,height:l*C},ae(V({translateX:-m*C,translateY:-b*C},e))))}))}},Bt={bind:function(){var e=this.element,r=this.options,n=this.cropper;ct(r.cropstart)&&gt(e,jt,r.cropstart),ct(r.cropmove)&&gt(e,_t,r.cropmove),ct(r.cropend)&&gt(e,Pt,r.cropend),ct(r.crop)&&gt(e,kt,r.crop),ct(r.zoom)&&gt(e,ye,r.zoom),gt(n,ue,this.onCropStart=this.cropStart.bind(this)),r.zoomable&&r.zoomOnWheel&&gt(n,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),r.toggleDragModeOnDblclick&&gt(n,ee,this.onDblclick=this.dblclick.bind(this)),gt(e.ownerDocument,fe,this.onCropMove=this.cropMove.bind(this)),gt(e.ownerDocument,Ue,this.onCropEnd=this.cropEnd.bind(this)),r.responsive&&gt(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,r=this.options,n=this.cropper;ct(r.cropstart)&&bt(e,jt,r.cropstart),ct(r.cropmove)&&bt(e,_t,r.cropmove),ct(r.cropend)&&bt(e,Pt,r.cropend),ct(r.crop)&&bt(e,kt,r.crop),ct(r.zoom)&&bt(e,ye,r.zoom),bt(n,ue,this.onCropStart),r.zoomable&&r.zoomOnWheel&&bt(n,"wheel",this.onWheel,{passive:!1,capture:!0}),r.toggleDragModeOnDblclick&&bt(n,ee,this.onDblclick),bt(e.ownerDocument,fe,this.onCropMove),bt(e.ownerDocument,Ue,this.onCropEnd),r.responsive&&bt(window,"resize",this.onResize)}},$i={resize:function(){var e,r,n,s,c,u,l;this.disabled||(e=this.options,s=this.container,r=this.containerData,n=s.offsetWidth/r.width,s=s.offsetHeight/r.height,(c=Math.abs(n-1)>Math.abs(s-1)?n:s)!=1&&(e.restore&&(u=this.getCanvasData(),l=this.getCropBoxData()),this.render(),e.restore)&&(this.setCanvasData(Q(u,function(m,b){u[b]=m*c})),this.setCropBoxData(Q(l,function(m,b){l[b]=m*c}))))},dblclick:function(){var e,r;this.disabled||this.options.dragMode===Xt||this.setDragMode((e=this.dragBox,r=I,(e.classList?e.classList.contains(r):-1<e.className.indexOf(r))?Lt:wt))},wheel:function(e){var r=this,n=Number(this.options.wheelZoomRatio)||.1,s=1;this.disabled||(e.preventDefault(),this.wheeling)||(this.wheeling=!0,setTimeout(function(){r.wheeling=!1},50),e.deltaY?s=0<e.deltaY?1:-1:e.wheelDelta?s=-e.wheelDelta/120:e.detail&&(s=0<e.detail?1:-1),this.zoom(-s*n,e))},cropStart:function(e){var r,n=e.buttons,s=e.button;this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(H(n)&&n!==1||H(s)&&s!==0||e.ctrlKey)||(n=this.options,r=this.pointers,e.changedTouches?Q(e.changedTouches,function(c){r[c.identifier]=ge(c)}):r[e.pointerId||0]=ge(e),s=1<Object.keys(r).length&&n.zoomable&&n.zoomOnTouch?S:Me(e.target,ot),ki.test(s)&&$t(this.element,jt,{originalEvent:e,action:s})!==!1&&(e.preventDefault(),this.action=s,this.cropping=!1,s===x)&&(this.cropping=!0,et(this.dragBox,ut)))},cropMove:function(e){var r,n=this.action;!this.disabled&&n&&(r=this.pointers,e.preventDefault(),$t(this.element,_t,{originalEvent:e,action:n})!==!1)&&(e.changedTouches?Q(e.changedTouches,function(s){V(r[s.identifier]||{},ge(s,!0))}):V(r[e.pointerId||0]||{},ge(e,!0)),this.change(e))},cropEnd:function(e){var r,n;this.disabled||(r=this.action,n=this.pointers,e.changedTouches?Q(e.changedTouches,function(s){delete n[s.identifier]}):delete n[e.pointerId||0],r&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,qt(this.dragBox,ut,this.cropped&&this.options.modal)),$t(this.element,Pt,{originalEvent:e,action:r})))}},Gi={change:function(e){function r(it){switch(it){case Y:X+E.x>ht&&(E.x=ht-X);break;case L:B+E.x<z&&(E.x=z-B);break;case P:R+E.y<tt&&(E.y=tt-R);break;case j:A+E.y>rt&&(E.y=rt-A)}}var n,s,c,u=this.options,l=this.canvasData,m=this.containerData,b=this.cropBoxData,O=this.pointers,T=this.action,M=u.aspectRatio,B=b.left,R=b.top,C=b.width,N=b.height,X=B+C,A=R+N,z=0,tt=0,ht=m.width,rt=m.height,K=!0,mt=(!M&&e.shiftKey&&(M=C&&N?C/N:1),this.limited&&(z=b.minLeft,tt=b.minTop,ht=z+Math.min(m.width,l.width,l.left+l.width),rt=tt+Math.min(m.height,l.height,l.top+l.height)),O[Object.keys(O)[0]]),E={x:mt.endX-mt.startX,y:mt.endY-mt.startY};switch(T){case v:B+=E.x,R+=E.y;break;case Y:0<=E.x&&(ht<=X||M&&(R<=tt||rt<=A))?K=!1:(r(Y),(C+=E.x)<0&&(T=L,B-=C=-C),M&&(R+=(b.height-(N=C/M))/2));break;case P:E.y<=0&&(R<=tt||M&&(B<=z||ht<=X))?K=!1:(r(P),N-=E.y,R+=E.y,N<0&&(T=j,R-=N=-N),M&&(B+=(b.width-(C=N*M))/2));break;case L:E.x<=0&&(B<=z||M&&(R<=tt||rt<=A))?K=!1:(r(L),C-=E.x,B+=E.x,C<0&&(T=Y,B-=C=-C),M&&(R+=(b.height-(N=C/M))/2));break;case j:0<=E.y&&(rt<=A||M&&(B<=z||ht<=X))?K=!1:(r(j),(N+=E.y)<0&&(T=P,R-=N=-N),M&&(B+=(b.width-(C=N*M))/2));break;case U:if(M){if(E.y<=0&&(R<=tt||ht<=X)){K=!1;break}r(P),N-=E.y,R+=E.y,C=N*M}else r(P),r(Y),!(0<=E.x)||X<ht?C+=E.x:E.y<=0&&R<=tt&&(K=!1),(!(E.y<=0)||tt<R)&&(N-=E.y,R+=E.y);C<0&&N<0?(T=D,R-=N=-N,B-=C=-C):C<0?(T=st,B-=C=-C):N<0&&(T=Z,R-=N=-N);break;case st:if(M){if(E.y<=0&&(R<=tt||B<=z)){K=!1;break}r(P),N-=E.y,R+=E.y,B+=b.width-(C=N*M)}else r(P),r(L),!(E.x<=0)||z<B?(C-=E.x,B+=E.x):E.y<=0&&R<=tt&&(K=!1),(!(E.y<=0)||tt<R)&&(N-=E.y,R+=E.y);C<0&&N<0?(T=Z,R-=N=-N,B-=C=-C):C<0?(T=U,B-=C=-C):N<0&&(T=D,R-=N=-N);break;case D:if(M){if(E.x<=0&&(B<=z||rt<=A)){K=!1;break}r(L),C-=E.x,B+=E.x,N=C/M}else r(j),r(L),!(E.x<=0)||z<B?(C-=E.x,B+=E.x):0<=E.y&&rt<=A&&(K=!1),(!(0<=E.y)||A<rt)&&(N+=E.y);C<0&&N<0?(T=U,R-=N=-N,B-=C=-C):C<0?(T=Z,B-=C=-C):N<0&&(T=st,R-=N=-N);break;case Z:if(M){if(0<=E.x&&(ht<=X||rt<=A)){K=!1;break}r(Y),N=(C+=E.x)/M}else r(j),r(Y),!(0<=E.x)||X<ht?C+=E.x:0<=E.y&&rt<=A&&(K=!1),(!(0<=E.y)||A<rt)&&(N+=E.y);C<0&&N<0?(T=st,R-=N=-N,B-=C=-C):C<0?(T=D,B-=C=-C):N<0&&(T=U,R-=N=-N);break;case k:this.move(E.x,E.y),K=!1;break;case S:this.zoom((s=i({},n=O),c=0,Q(n,function(it,nt){delete s[nt],Q(s,function(Wt){var re=Math.abs(it.startX-Wt.startX),ne=Math.abs(it.startY-Wt.startY),Kt=Math.abs(it.endX-Wt.endX),Wt=Math.abs(it.endY-Wt.endY),re=Math.sqrt(re*re+ne*ne),ne=(Math.sqrt(Kt*Kt+Wt*Wt)-re)/re;Math.abs(ne)>Math.abs(c)&&(c=ne)})}),c),e),K=!1;break;case x:E.x&&E.y?(n=Fe(this.cropper),B=mt.startX-n.left,R=mt.startY-n.top,C=b.minWidth,N=b.minHeight,0<E.x?T=0<E.y?Z:U:E.x<0&&(B-=C,T=0<E.y?D:st),E.y<0&&(R-=N),this.cropped||(Dt(this.cropBox,_),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))):K=!1}K&&(b.width=C,b.height=N,b.left=B,b.top=R,this.action=T,this.renderCropBox()),Q(O,function(it){it.startX=it.endX,it.startY=it.endY})}},Ki={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&et(this.dragBox,ut),Dt(this.cropBox,_),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=V({},this.initialImageData),this.canvasData=V({},this.initialCanvasData),this.cropBoxData=V({},this.initialCropBoxData),this.renderCanvas(),this.cropped)&&this.renderCropBox(),this},clear:function(){return this.cropped&&!this.disabled&&(V(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Dt(this.dragBox,ut),et(this.cropBox,_)),this},replace:function(e){var r=1<arguments.length&&arguments[1]!==void 0&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),r?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Q(this.previews,function(n){n.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Dt(this.cropper,G)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,et(this.cropper,G)),this},destroy:function(){var e=this.element;return e[f]&&(e[f]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate()),this},move:function(e){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:e,s=this.canvasData,n=s.left,s=s.top;return this.moveTo(xe(e)?e:n+Number(e),xe(r)?r:s+Number(r))},moveTo:function(e){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:e,n=this.canvasData,s=!1;return e=Number(e),r=Number(r),this.ready&&!this.disabled&&this.options.movable&&(H(e)&&(n.left=e,s=!0),H(r)&&(n.top=r,s=!0),s)&&this.renderCanvas(!0),this},zoom:function(e,r){var n=this.canvasData;return e=Number(e),this.zoomTo(n.width*(e=e<0?1/(1-e):1+e)/n.naturalWidth,null,r)},zoomTo:function(e,r,n){var s,c,u,l=this.options,m=this.canvasData,b=m.width,O=m.height,T=m.naturalWidth,M=m.naturalHeight;if(0<=(e=Number(e))&&this.ready&&!this.disabled&&l.zoomable){if(l=T*e,M=M*e,$t(this.element,ye,{ratio:e,oldRatio:b/T,originalEvent:n})===!1)return this;n?(e=this.pointers,T=Fe(this.cropper),e=e&&Object.keys(e).length?(u=c=s=0,Q(e,function(C){var R=C.startX,C=C.startY;s+=R,c+=C,u+=1}),{pageX:s/=u,pageY:c/=u}):{pageX:n.pageX,pageY:n.pageY},m.left-=(l-b)*((e.pageX-T.left-m.left)/b),m.top-=(M-O)*((e.pageY-T.top-m.top)/O)):Ut(r)&&H(r.x)&&H(r.y)?(m.left-=(l-b)*((r.x-m.left)/b),m.top-=(M-O)*((r.y-m.top)/O)):(m.left-=(l-b)/2,m.top-=(M-O)/2),m.width=l,m.height=M,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return H(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var r=this.imageData.scaleY;return this.scale(e,H(r)?r:1)},scaleY:function(e){var r=this.imageData.scaleX;return this.scale(H(r)?r:1,e)},scale:function(e){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:e,n=this.imageData,s=!1;return e=Number(e),r=Number(r),this.ready&&!this.disabled&&this.options.scalable&&(H(e)&&(n.scaleX=e,s=!0),H(r)&&(n.scaleY=r,s=!0),s)&&this.renderCanvas(!0,!0),this},getData:function(){var e,r,n=0<arguments.length&&arguments[0]!==void 0&&arguments[0],s=this.options,c=this.imageData,u=this.canvasData,l=this.cropBoxData;return this.ready&&this.cropped?(e={x:l.left-u.left,y:l.top-u.top,width:l.width,height:l.height},r=c.width/c.naturalWidth,Q(e,function(m,b){e[b]=m/r}),n&&(u=Math.round(e.y+e.height),l=Math.round(e.x+e.width),e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=l-e.x,e.height=u-e.y)):e={x:0,y:0,width:0,height:0},s.rotatable&&(e.rotate=c.rotate||0),s.scalable&&(e.scaleX=c.scaleX||1,e.scaleY=c.scaleY||1),e},setData:function(e){var r,n=this.options,s=this.imageData,c=this.canvasData,u={};return this.ready&&!this.disabled&&Ut(e)&&(r=!1,n.rotatable&&H(e.rotate)&&e.rotate!==s.rotate&&(s.rotate=e.rotate,r=!0),n.scalable&&(H(e.scaleX)&&e.scaleX!==s.scaleX&&(s.scaleX=e.scaleX,r=!0),H(e.scaleY))&&e.scaleY!==s.scaleY&&(s.scaleY=e.scaleY,r=!0),r&&this.renderCanvas(!0,!0),n=s.width/s.naturalWidth,H(e.x)&&(u.left=e.x*n+c.left),H(e.y)&&(u.top=e.y*n+c.top),H(e.width)&&(u.width=e.width*n),H(e.height)&&(u.height=e.height*n),this.setCropBoxData(u)),this},getContainerData:function(){return this.ready?V({},this.containerData):{}},getImageData:function(){return this.sized?V({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,r={};return this.ready&&Q(["left","top","width","height","naturalWidth","naturalHeight"],function(n){r[n]=e[n]}),r},setCanvasData:function(e){var r=this.canvasData,n=r.aspectRatio;return this.ready&&!this.disabled&&Ut(e)&&(H(e.left)&&(r.left=e.left),H(e.top)&&(r.top=e.top),H(e.width)?(r.width=e.width,r.height=e.width/n):H(e.height)&&(r.height=e.height,r.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,r=this.cropBoxData;return(e=this.ready&&this.cropped?{left:r.left,top:r.top,width:r.width,height:r.height}:e)||{}},setCropBoxData:function(e){var r,n,s=this.cropBoxData,c=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&Ut(e)&&(H(e.left)&&(s.left=e.left),H(e.top)&&(s.top=e.top),H(e.width)&&e.width!==s.width&&(r=!0,s.width=e.width),H(e.height)&&e.height!==s.height&&(n=!0,s.height=e.height),c&&(r?s.height=s.width/c:n&&(s.width=s.height*c)),this.renderCropBox()),this},getCroppedCanvas:function(){var e,r,n,s,c,u,l,m,b,O,T,M,B,R,C,N,X,A,z,tt,ht,rt,K,mt,E,it,nt,yt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return this.ready&&window.HTMLCanvasElement?(it=this.canvasData,C=this.image,M=this.imageData,s=it,A=yt,N=M.aspectRatio,r=M.naturalWidth,c=M.naturalHeight,O=(O=M.rotate)===void 0?0:O,T=(T=M.scaleX)===void 0?1:T,M=(M=M.scaleY)===void 0?1:M,n=s.aspectRatio,m=s.naturalWidth,s=s.naturalHeight,l=(l=A.fillColor)===void 0?"transparent":l,B=(B=A.imageSmoothingEnabled)===void 0||B,R=(R=A.imageSmoothingQuality)===void 0?"low":R,u=(u=A.maxWidth)===void 0?1/0:u,nt=(nt=A.maxHeight)===void 0?1/0:nt,e=(e=A.minWidth)===void 0?0:e,A=(A=A.minHeight)===void 0?0:A,z=document.createElement("canvas"),X=z.getContext("2d"),b=Ot({aspectRatio:n,width:u,height:nt}),n=Ot({aspectRatio:n,width:e,height:A},"cover"),m=Math.min(b.width,Math.max(n.width,m)),b=Math.min(b.height,Math.max(n.height,s)),n=Ot({aspectRatio:N,width:u,height:nt}),s=Ot({aspectRatio:N,width:e,height:A},"cover"),u=Math.min(n.width,Math.max(s.width,r)),nt=Math.min(n.height,Math.max(s.height,c)),N=[-u/2,-nt/2,u,nt],z.width=Vt(m),z.height=Vt(b),X.fillStyle=l,X.fillRect(0,0,m,b),X.save(),X.translate(m/2,b/2),X.rotate(O*Math.PI/180),X.scale(T,M),X.imageSmoothingEnabled=B,X.imageSmoothingQuality=R,X.drawImage.apply(X,[C].concat(g(N.map(function(Kt){return Math.floor(Vt(Kt))})))),X.restore(),e=z,this.cropped?(r=(A=this.getData(yt.rounded)).x,n=A.y,s=A.width,c=A.height,(u=e.width/Math.floor(it.naturalWidth))!=1&&(r*=u,n*=u,s*=u,c*=u),l=Ot({aspectRatio:nt=s/c,width:yt.maxWidth||1/0,height:yt.maxHeight||1/0}),m=Ot({aspectRatio:nt,width:yt.minWidth||0,height:yt.minHeight||0},"cover"),O=(b=Ot({aspectRatio:nt,width:yt.width||(u!=1?e.width:s),height:yt.height||(u!=1?e.height:c)})).width,T=b.height,O=Math.min(l.width,Math.max(m.width,O)),T=Math.min(l.height,Math.max(m.height,T)),B=(M=document.createElement("canvas")).getContext("2d"),M.width=Vt(O),M.height=Vt(T),B.fillStyle=yt.fillColor||"transparent",B.fillRect(0,0,O,T),R=yt.imageSmoothingEnabled,C=yt.imageSmoothingQuality,B.imageSmoothingEnabled=R===void 0||R,C&&(B.imageSmoothingQuality=C),N=e.width,X=e.height,z=n,(A=r)<=-s||N<A?mt=rt=tt=A=0:A<=0?(rt=-A,A=0,mt=tt=Math.min(N,s+A)):A<=N&&(rt=0,mt=tt=Math.min(s,N-A)),tt<=0||z<=-c||X<z?E=K=ht=z=0:z<=0?(K=-z,z=0,E=ht=Math.min(X,c+z)):z<=X&&(K=0,E=ht=Math.min(c,X-z)),it=[A,z,tt,ht],0<mt&&0<E&&it.push(rt*(nt=O/s),K*nt,mt*nt,E*nt),B.drawImage.apply(B,[e].concat(g(it.map(function(Kt){return Math.floor(Vt(Kt))})))),M):e):null},setAspectRatio:function(e){var r=this.options;return this.disabled||xe(e)||(r.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped)&&this.renderCropBox()),this},setDragMode:function(e){var r,n,s=this.options,c=this.dragBox,u=this.face;return this.ready&&!this.disabled&&(n=s.movable&&e===Lt,s.dragMode=e=(r=e===wt)||n?e:Xt,ie(c,ot,e),qt(c,I,r),qt(c,ft,n),s.cropBoxMovable||(ie(u,ot,e),qt(u,I,r),qt(u,ft,n))),this}},Qi=w.Cropper,ei=function(){function e(c){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},l=this,m=e;if(!(l instanceof m))throw new TypeError("Cannot call a class as a function");if(!c||!Ii.test(c.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=c,this.options=V({},qe,Ut(u)&&u),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return r=e,s=[{key:"noConflict",value:function(){return window.Cropper=Qi,e}},{key:"setDefaults",value:function(c){V(qe,Ut(c)&&c)}}],(n=[{key:"init",value:function(){var c,u=this.element,l=u.tagName.toLowerCase();if(!u[f]){if(u[f]=this,l==="img"){if(this.isImg=!0,c=u.getAttribute("src")||"",!(this.originalUrl=c))return;c=u.src}else l==="canvas"&&window.HTMLCanvasElement&&(c=u.toDataURL());this.load(c)}}},{key:"load",value:function(c){var u,l,m,b,O,T,M=this;c&&(this.url=c,this.imageData={},u=this.element,(l=this.options).rotatable||l.scalable||(l.checkOrientation=!1),l.checkOrientation&&window.ArrayBuffer?Hi.test(c)?Wi.test(c)?this.read((T=(T=c).replace(Vi,""),m=atob(T),T=new ArrayBuffer(m.length),Q(b=new Uint8Array(T),function(B,R){b[R]=m.charCodeAt(R)}),T)):this.clone():(O=new XMLHttpRequest,T=this.clone.bind(this),this.reloading=!0,(this.xhr=O).onabort=T,O.onerror=T,O.ontimeout=T,O.onprogress=function(){O.getResponseHeader("content-type")!==Ve&&O.abort()},O.onload=function(){M.read(O.response)},O.onloadend=function(){M.reloading=!1,M.xhr=null},l.checkCrossOrigin&&Ze(c)&&u.crossOrigin&&(c=Je(c)),O.open("GET",c,!0),O.responseType="arraybuffer",O.withCredentials=u.crossOrigin==="use-credentials",O.send()):this.clone())}},{key:"read",value:function(c){var u=this.options,l=this.imageData,m=qi(c),b=0,O=1,T=1;1<m&&(this.url=function(M,B){for(var R=[],C=new Uint8Array(M);0<C.length;)R.push(ti.apply(null,Ge(C.subarray(0,8192)))),C=C.subarray(8192);return"data:".concat(B,";base64,").concat(btoa(R.join("")))}(c,Ve),b=(c=function(M){var B=0,R=1,C=1;switch(M){case 2:R=-1;break;case 3:B=-180;break;case 4:C=-1;break;case 5:B=90,C=-1;break;case 6:B=90;break;case 7:B=90,R=-1;break;case 8:B=-90}return{rotate:B,scaleX:R,scaleY:C}}(m)).rotate,O=c.scaleX,T=c.scaleY),u.rotatable&&(l.rotate=b),u.scalable&&(l.scaleX=O,l.scaleY=T),this.clone()}},{key:"clone",value:function(){var c=this.element,u=this.url,l=c.crossOrigin,m=u,b=(this.options.checkCrossOrigin&&Ze(u)&&(l=l||"anonymous",m=Je(u)),this.crossOrigin=l,this.crossOriginUrl=m,document.createElement("img"));l&&(b.crossOrigin=l),b.src=m||u,b.alt=c.alt||"The image to crop",(this.image=b).onload=this.start.bind(this),b.onerror=this.stop.bind(this),et(b,pt),c.parentNode.insertBefore(b,c.nextSibling)}},{key:"start",value:function(){function c(T,M){V(m.imageData,{naturalWidth:T,naturalHeight:M,aspectRatio:T/M}),m.initialImageData=V({},m.imageData),m.sizing=!1,m.sized=!0,m.build()}var u,l,m=this,b=this.image,O=(b.onload=null,b.onerror=null,this.sizing=!0,w.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(w.navigator.userAgent));b.naturalWidth&&!O?c(b.naturalWidth,b.naturalHeight):(u=document.createElement("img"),l=document.body||document.documentElement,(this.sizingImage=u).onload=function(){c(u.width,u.height),O||l.removeChild(u)},u.src=b.src,O||(u.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",l.appendChild(u)))}},{key:"stop",value:function(){var c=this.image;c.onload=null,c.onerror=null,c.parentNode.removeChild(c),this.image=null}},{key:"build",value:function(){var c,u,l,m,b,O,T,M,B;this.sized&&!this.ready&&(c=this.element,u=this.options,l=this.image,m=c.parentNode,(b=document.createElement("div")).innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',O=(b=b.querySelector(".".concat(f,"-container"))).querySelector(".".concat(f,"-canvas")),T=b.querySelector(".".concat(f,"-drag-box")),B=(M=b.querySelector(".".concat(f,"-crop-box"))).querySelector(".".concat(f,"-face")),this.container=m,this.cropper=b,this.canvas=O,this.dragBox=T,this.cropBox=M,this.viewBox=b.querySelector(".".concat(f,"-view-box")),this.face=B,O.appendChild(l),et(c,_),m.insertBefore(b,c.nextSibling),Dt(l,pt),this.initPreview(),this.bind(),u.initialAspectRatio=Math.max(0,u.initialAspectRatio)||NaN,u.aspectRatio=Math.max(0,u.aspectRatio)||NaN,u.viewMode=Math.max(0,Math.min(3,Math.round(u.viewMode)))||0,et(M,_),u.guides||et(M.getElementsByClassName("".concat(f,"-dashed")),_),u.center||et(M.getElementsByClassName("".concat(f,"-center")),_),u.background&&et(b,"".concat(f,"-bg")),u.highlight||et(B,Et),u.cropBoxMovable&&(et(B,ft),ie(B,ot,v)),u.cropBoxResizable||(et(M.getElementsByClassName("".concat(f,"-line")),_),et(M.getElementsByClassName("".concat(f,"-point")),_)),this.render(),this.ready=!0,this.setDragMode(u.dragMode),u.autoCrop&&this.crop(),this.setData(u.data),ct(u.ready)&&gt(c,"ready",u.ready,{once:!0}),$t(c,"ready"))}},{key:"unbuild",value:function(){var c;this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),(c=this.cropper.parentNode)&&c.removeChild(this.cropper),Dt(this.element,_))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&p(r.prototype,n),s&&p(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}();return V(ei.prototype,Gt,Nt,Bt,$i,Gi,Ki),ei})})(Zi);/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function ii(o,t){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);t&&(i=i.filter(function(d){return Object.getOwnPropertyDescriptor(o,d).enumerable})),a.push.apply(a,i)}return a}function wi(o){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ii(Object(a),!0).forEach(function(i){ia(o,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):ii(Object(a)).forEach(function(i){Object.defineProperty(o,i,Object.getOwnPropertyDescriptor(a,i))})}return o}function Ji(o,t){if(typeof o!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var i=a.call(o,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(o)}function bi(o){var t=Ji(o,"string");return typeof t=="symbol"?t:t+""}function Be(o){"@babel/helpers - typeof";return Be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Be(o)}function ta(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function ai(o,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(o,bi(i.key),i)}}function ea(o,t,a){return t&&ai(o.prototype,t),a&&ai(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o}function ia(o,t,a){return t=bi(t),t in o?Object.defineProperty(o,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[t]=a,o}function yi(o){return aa(o)||ra(o)||na(o)||oa()}function aa(o){if(Array.isArray(o))return Re(o)}function ra(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function na(o,t){if(o){if(typeof o=="string")return Re(o,t);var a=Object.prototype.toString.call(o).slice(8,-1);if(a==="Object"&&o.constructor&&(a=o.constructor.name),a==="Map"||a==="Set")return Array.from(o);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Re(o,t)}}function Re(o,t){(t==null||t>o.length)&&(t=o.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=o[a];return i}function oa(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var be=typeof window<"u"&&typeof window.document<"u",Ct=be?window:{},ze=be&&Ct.document.documentElement?"ontouchstart"in Ct.document.documentElement:!1,Xe=be?"PointerEvent"in Ct:!1,q="cropper",Pe="all",xi="crop",Di="move",Mi="zoom",It="e",Yt="w",Qt="s",Rt="n",oe="ne",se="nw",he="se",ce="sw",Ae="".concat(q,"-crop"),ri="".concat(q,"-disabled"),dt="".concat(q,"-hidden"),ni="".concat(q,"-hide"),sa="".concat(q,"-invisible"),we="".concat(q,"-modal"),Se="".concat(q,"-move"),de="".concat(q,"Action"),me="".concat(q,"Preview"),_e="crop",Ci="move",Ei="none",Le="crop",ke="cropend",He="cropmove",We="cropstart",oi="dblclick",ha=ze?"touchstart":"mousedown",ca=ze?"touchmove":"mousemove",la=ze?"touchend touchcancel":"mouseup",si=Xe?"pointerdown":ha,hi=Xe?"pointermove":ca,ci=Xe?"pointerup pointercancel":la,li="ready",di="resize",pi="wheel",Ie="zoom",ui="image/jpeg",da=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,pa=/^data:/,ua=/^data:image\/jpeg;base64,/,fa=/^img|canvas$/i,Ti=200,Oi=100,fi={viewMode:0,dragMode:_e,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Ti,minContainerHeight:Oi,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},ga='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',ma=Number.isNaN||Ct.isNaN;function W(o){return typeof o=="number"&&!ma(o)}var gi=function(t){return t>0&&t<1/0};function Oe(o){return typeof o>"u"}function zt(o){return Be(o)==="object"&&o!==null}var va=Object.prototype.hasOwnProperty;function Ft(o){if(!zt(o))return!1;try{var t=o.constructor,a=t.prototype;return t&&a&&va.call(a,"isPrototypeOf")}catch{return!1}}function lt(o){return typeof o=="function"}var wa=Array.prototype.slice;function Ni(o){return Array.from?Array.from(o):wa.call(o)}function F(o,t){return o&&lt(t)&&(Array.isArray(o)||W(o.length)?Ni(o).forEach(function(a,i){t.call(o,a,i,o)}):zt(o)&&Object.keys(o).forEach(function(a){t.call(o,o[a],a,o)})),o}var $=Object.assign||function(t){for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return zt(t)&&i.length>0&&i.forEach(function(h){zt(h)&&Object.keys(h).forEach(function(p){t[p]=h[p]})}),t},ba=/\.\d*(?:0|9){12}\d*$/;function Jt(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return ba.test(o)?Math.round(o*t)/t:o}var ya=/^width|height|left|top|marginLeft|marginTop$/;function At(o,t){var a=o.style;F(t,function(i,d){ya.test(d)&&W(i)&&(i="".concat(i,"px")),a[d]=i})}function xa(o,t){return o.classList?o.classList.contains(t):o.className.indexOf(t)>-1}function at(o,t){if(t){if(W(o.length)){F(o,function(i){at(i,t)});return}if(o.classList){o.classList.add(t);return}var a=o.className.trim();a?a.indexOf(t)<0&&(o.className="".concat(a," ").concat(t)):o.className=t}}function Mt(o,t){if(t){if(W(o.length)){F(o,function(a){Mt(a,t)});return}if(o.classList){o.classList.remove(t);return}o.className.indexOf(t)>=0&&(o.className=o.className.replace(t,""))}}function Zt(o,t,a){if(t){if(W(o.length)){F(o,function(i){Zt(i,t,a)});return}a?at(o,t):Mt(o,t)}}var Da=/([a-z\d])([A-Z])/g;function je(o){return o.replace(Da,"$1-$2").toLowerCase()}function Ye(o,t){return zt(o[t])?o[t]:o.dataset?o.dataset[t]:o.getAttribute("data-".concat(je(t)))}function pe(o,t,a){zt(a)?o[t]=a:o.dataset?o.dataset[t]=a:o.setAttribute("data-".concat(je(t)),a)}function Ma(o,t){if(zt(o[t]))try{delete o[t]}catch{o[t]=void 0}else if(o.dataset)try{delete o.dataset[t]}catch{o.dataset[t]=void 0}else o.removeAttribute("data-".concat(je(t)))}var Bi=/\s\s*/,Ri=function(){var o=!1;if(be){var t=!1,a=function(){},i=Object.defineProperty({},"once",{get:function(){return o=!0,t},set:function(h){t=h}});Ct.addEventListener("test",a,i),Ct.removeEventListener("test",a,i)}return o}();function xt(o,t,a){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=a;t.trim().split(Bi).forEach(function(h){if(!Ri){var p=o.listeners;p&&p[h]&&p[h][a]&&(d=p[h][a],delete p[h][a],Object.keys(p[h]).length===0&&delete p[h],Object.keys(p).length===0&&delete o.listeners)}o.removeEventListener(h,d,i)})}function vt(o,t,a){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=a;t.trim().split(Bi).forEach(function(h){if(i.once&&!Ri){var p=o.listeners,g=p===void 0?{}:p;d=function(){delete g[h][a],o.removeEventListener(h,d,i);for(var w=arguments.length,f=new Array(w),v=0;v<w;v++)f[v]=arguments[v];a.apply(o,f)},g[h]||(g[h]={}),g[h][a]&&o.removeEventListener(h,g[h][a],i),g[h][a]=d,o.listeners=g}o.addEventListener(h,d,i)})}function te(o,t,a){var i;return lt(Event)&&lt(CustomEvent)?i=new CustomEvent(t,{detail:a,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(t,!0,!0,a)),o.dispatchEvent(i)}function Ai(o){var t=o.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ne=Ct.location,Ca=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function mi(o){var t=o.match(Ca);return t!==null&&(t[1]!==Ne.protocol||t[2]!==Ne.hostname||t[3]!==Ne.port)}function vi(o){var t="timestamp=".concat(new Date().getTime());return o+(o.indexOf("?")===-1?"?":"&")+t}function le(o){var t=o.rotate,a=o.scaleX,i=o.scaleY,d=o.translateX,h=o.translateY,p=[];W(d)&&d!==0&&p.push("translateX(".concat(d,"px)")),W(h)&&h!==0&&p.push("translateY(".concat(h,"px)")),W(t)&&t!==0&&p.push("rotate(".concat(t,"deg)")),W(a)&&a!==1&&p.push("scaleX(".concat(a,")")),W(i)&&i!==1&&p.push("scaleY(".concat(i,")"));var g=p.length?p.join(" "):"none";return{WebkitTransform:g,msTransform:g,transform:g}}function Ea(o){var t=wi({},o),a=0;return F(o,function(i,d){delete t[d],F(t,function(h){var p=Math.abs(i.startX-h.startX),g=Math.abs(i.startY-h.startY),y=Math.abs(i.endX-h.endX),w=Math.abs(i.endY-h.endY),f=Math.sqrt(p*p+g*g),v=Math.sqrt(y*y+w*w),x=(v-f)/f;Math.abs(x)>Math.abs(a)&&(a=x)})}),a}function ve(o,t){var a=o.pageX,i=o.pageY,d={endX:a,endY:i};return t?d:wi({startX:a,startY:i},d)}function Ta(o){var t=0,a=0,i=0;return F(o,function(d){var h=d.startX,p=d.startY;t+=h,a+=p,i+=1}),t/=i,a/=i,{pageX:t,pageY:a}}function St(o){var t=o.aspectRatio,a=o.height,i=o.width,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",h=gi(i),p=gi(a);if(h&&p){var g=a*t;d==="contain"&&g>i||d==="cover"&&g<i?a=i/t:i=a*t}else h?a=i/t:p&&(i=a*t);return{width:i,height:a}}function Oa(o){var t=o.width,a=o.height,i=o.degree;if(i=Math.abs(i)%180,i===90)return{width:a,height:t};var d=i%90*Math.PI/180,h=Math.sin(d),p=Math.cos(d),g=t*p+a*h,y=t*h+a*p;return i>90?{width:y,height:g}:{width:g,height:y}}function Na(o,t,a,i){var d=t.aspectRatio,h=t.naturalWidth,p=t.naturalHeight,g=t.rotate,y=g===void 0?0:g,w=t.scaleX,f=w===void 0?1:w,v=t.scaleY,x=v===void 0?1:v,k=a.aspectRatio,S=a.naturalWidth,Y=a.naturalHeight,L=i.fillColor,j=L===void 0?"transparent":L,P=i.imageSmoothingEnabled,U=P===void 0?!0:P,st=i.imageSmoothingQuality,Z=st===void 0?"low":st,D=i.maxWidth,I=D===void 0?1/0:D,G=i.maxHeight,_=G===void 0?1/0:G,pt=i.minWidth,Et=pt===void 0?0:pt,ut=i.minHeight,ft=ut===void 0?0:ut,ot=document.createElement("canvas"),J=ot.getContext("2d"),wt=St({aspectRatio:k,width:I,height:_}),Lt=St({aspectRatio:k,width:Et,height:ft},"cover"),Xt=Math.min(wt.width,Math.max(Lt.width,S)),kt=Math.min(wt.height,Math.max(Lt.height,Y)),Pt=St({aspectRatio:d,width:I,height:_}),_t=St({aspectRatio:d,width:Et,height:ft},"cover"),jt=Math.min(Pt.width,Math.max(_t.width,h)),ee=Math.min(Pt.height,Math.max(_t.height,p)),ue=[-jt/2,-ee/2,jt,ee];return ot.width=Jt(Xt),ot.height=Jt(kt),J.fillStyle=j,J.fillRect(0,0,Xt,kt),J.save(),J.translate(Xt/2,kt/2),J.rotate(y*Math.PI/180),J.scale(f,x),J.imageSmoothingEnabled=U,J.imageSmoothingQuality=Z,J.drawImage.apply(J,[o].concat(yi(ue.map(function(fe){return Math.floor(Jt(fe))})))),J.restore(),ot}var Si=String.fromCharCode;function Ba(o,t,a){var i="";a+=t;for(var d=t;d<a;d+=1)i+=Si(o.getUint8(d));return i}var Ra=/^data:.*,/;function Aa(o){var t=o.replace(Ra,""),a=atob(t),i=new ArrayBuffer(a.length),d=new Uint8Array(i);return F(d,function(h,p){d[p]=a.charCodeAt(p)}),i}function Sa(o,t){for(var a=[],i=8192,d=new Uint8Array(o);d.length>0;)a.push(Si.apply(null,Ni(d.subarray(0,i)))),d=d.subarray(i);return"data:".concat(t,";base64,").concat(btoa(a.join("")))}function La(o){var t=new DataView(o),a;try{var i,d,h;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var p=t.byteLength,g=2;g+1<p;){if(t.getUint8(g)===255&&t.getUint8(g+1)===225){d=g;break}g+=1}if(d){var y=d+4,w=d+10;if(Ba(t,y,4)==="Exif"){var f=t.getUint16(w);if(i=f===18761,(i||f===19789)&&t.getUint16(w+2,i)===42){var v=t.getUint32(w+4,i);v>=8&&(h=w+v)}}}if(h){var x=t.getUint16(h,i),k,S;for(S=0;S<x;S+=1)if(k=h+S*12+2,t.getUint16(k,i)===274){k+=8,a=t.getUint16(k,i),t.setUint16(k,1,i);break}}}catch{a=1}return a}function ka(o){var t=0,a=1,i=1;switch(o){case 2:a=-1;break;case 3:t=-180;break;case 4:i=-1;break;case 5:t=90,i=-1;break;case 6:t=90;break;case 7:t=90,a=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:a,scaleY:i}}var Ha={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,a=this.options,i=this.container,d=this.cropper,h=Number(a.minContainerWidth),p=Number(a.minContainerHeight);at(d,dt),Mt(t,dt);var g={width:Math.max(i.offsetWidth,h>=0?h:Ti),height:Math.max(i.offsetHeight,p>=0?p:Oi)};this.containerData=g,At(d,{width:g.width,height:g.height}),at(t,dt),Mt(d,dt)},initCanvas:function(){var t=this.containerData,a=this.imageData,i=this.options.viewMode,d=Math.abs(a.rotate)%180===90,h=d?a.naturalHeight:a.naturalWidth,p=d?a.naturalWidth:a.naturalHeight,g=h/p,y=t.width,w=t.height;t.height*g>t.width?i===3?y=t.height*g:w=t.width/g:i===3?w=t.width/g:y=t.height*g;var f={aspectRatio:g,naturalWidth:h,naturalHeight:p,width:y,height:w};this.canvasData=f,this.limited=i===1||i===2,this.limitCanvas(!0,!0),f.width=Math.min(Math.max(f.width,f.minWidth),f.maxWidth),f.height=Math.min(Math.max(f.height,f.minHeight),f.maxHeight),f.left=(t.width-f.width)/2,f.top=(t.height-f.height)/2,f.oldLeft=f.left,f.oldTop=f.top,this.initialCanvasData=$({},f)},limitCanvas:function(t,a){var i=this.options,d=this.containerData,h=this.canvasData,p=this.cropBoxData,g=i.viewMode,y=h.aspectRatio,w=this.cropped&&p;if(t){var f=Number(i.minCanvasWidth)||0,v=Number(i.minCanvasHeight)||0;g>1?(f=Math.max(f,d.width),v=Math.max(v,d.height),g===3&&(v*y>f?f=v*y:v=f/y)):g>0&&(f?f=Math.max(f,w?p.width:0):v?v=Math.max(v,w?p.height:0):w&&(f=p.width,v=p.height,v*y>f?f=v*y:v=f/y));var x=St({aspectRatio:y,width:f,height:v});f=x.width,v=x.height,h.minWidth=f,h.minHeight=v,h.maxWidth=1/0,h.maxHeight=1/0}if(a)if(g>(w?0:1)){var k=d.width-h.width,S=d.height-h.height;h.minLeft=Math.min(0,k),h.minTop=Math.min(0,S),h.maxLeft=Math.max(0,k),h.maxTop=Math.max(0,S),w&&this.limited&&(h.minLeft=Math.min(p.left,p.left+(p.width-h.width)),h.minTop=Math.min(p.top,p.top+(p.height-h.height)),h.maxLeft=p.left,h.maxTop=p.top,g===2&&(h.width>=d.width&&(h.minLeft=Math.min(0,k),h.maxLeft=Math.max(0,k)),h.height>=d.height&&(h.minTop=Math.min(0,S),h.maxTop=Math.max(0,S))))}else h.minLeft=-h.width,h.minTop=-h.height,h.maxLeft=d.width,h.maxTop=d.height},renderCanvas:function(t,a){var i=this.canvasData,d=this.imageData;if(a){var h=Oa({width:d.naturalWidth*Math.abs(d.scaleX||1),height:d.naturalHeight*Math.abs(d.scaleY||1),degree:d.rotate||0}),p=h.width,g=h.height,y=i.width*(p/i.naturalWidth),w=i.height*(g/i.naturalHeight);i.left-=(y-i.width)/2,i.top-=(w-i.height)/2,i.width=y,i.height=w,i.aspectRatio=p/g,i.naturalWidth=p,i.naturalHeight=g,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,At(this.canvas,$({width:i.width,height:i.height},le({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var a=this.canvasData,i=this.imageData,d=i.naturalWidth*(a.width/a.naturalWidth),h=i.naturalHeight*(a.height/a.naturalHeight);$(i,{width:d,height:h,left:(a.width-d)/2,top:(a.height-h)/2}),At(this.image,$({width:i.width,height:i.height},le($({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,a=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,d=Number(t.autoCropArea)||.8,h={width:a.width,height:a.height};i&&(a.height*i>a.width?h.height=h.width/i:h.width=h.height*i),this.cropBoxData=h,this.limitCropBox(!0,!0),h.width=Math.min(Math.max(h.width,h.minWidth),h.maxWidth),h.height=Math.min(Math.max(h.height,h.minHeight),h.maxHeight),h.width=Math.max(h.minWidth,h.width*d),h.height=Math.max(h.minHeight,h.height*d),h.left=a.left+(a.width-h.width)/2,h.top=a.top+(a.height-h.height)/2,h.oldLeft=h.left,h.oldTop=h.top,this.initialCropBoxData=$({},h)},limitCropBox:function(t,a){var i=this.options,d=this.containerData,h=this.canvasData,p=this.cropBoxData,g=this.limited,y=i.aspectRatio;if(t){var w=Number(i.minCropBoxWidth)||0,f=Number(i.minCropBoxHeight)||0,v=g?Math.min(d.width,h.width,h.width+h.left,d.width-h.left):d.width,x=g?Math.min(d.height,h.height,h.height+h.top,d.height-h.top):d.height;w=Math.min(w,d.width),f=Math.min(f,d.height),y&&(w&&f?f*y>w?f=w/y:w=f*y:w?f=w/y:f&&(w=f*y),x*y>v?x=v/y:v=x*y),p.minWidth=Math.min(w,v),p.minHeight=Math.min(f,x),p.maxWidth=v,p.maxHeight=x}a&&(g?(p.minLeft=Math.max(0,h.left),p.minTop=Math.max(0,h.top),p.maxLeft=Math.min(d.width,h.left+h.width)-p.width,p.maxTop=Math.min(d.height,h.top+h.height)-p.height):(p.minLeft=0,p.minTop=0,p.maxLeft=d.width-p.width,p.maxTop=d.height-p.height))},renderCropBox:function(){var t=this.options,a=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&pe(this.face,de,i.width>=a.width&&i.height>=a.height?Di:Pe),At(this.cropBox,$({width:i.width,height:i.height},le({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),te(this.element,Le,this.getData())}},Wa={initPreview:function(){var t=this.element,a=this.crossOrigin,i=this.options.preview,d=a?this.crossOriginUrl:this.url,h=t.alt||"The image to preview",p=document.createElement("img");if(a&&(p.crossOrigin=a),p.src=d,p.alt=h,this.viewBox.appendChild(p),this.viewBoxImage=p,!!i){var g=i;typeof i=="string"?g=t.ownerDocument.querySelectorAll(i):i.querySelector&&(g=[i]),this.previews=g,F(g,function(y){var w=document.createElement("img");pe(y,me,{width:y.offsetWidth,height:y.offsetHeight,html:y.innerHTML}),a&&(w.crossOrigin=a),w.src=d,w.alt=h,w.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',y.innerHTML="",y.appendChild(w)})}},resetPreview:function(){F(this.previews,function(t){var a=Ye(t,me);At(t,{width:a.width,height:a.height}),t.innerHTML=a.html,Ma(t,me)})},preview:function(){var t=this.imageData,a=this.canvasData,i=this.cropBoxData,d=i.width,h=i.height,p=t.width,g=t.height,y=i.left-a.left-t.left,w=i.top-a.top-t.top;!this.cropped||this.disabled||(At(this.viewBoxImage,$({width:p,height:g},le($({translateX:-y,translateY:-w},t)))),F(this.previews,function(f){var v=Ye(f,me),x=v.width,k=v.height,S=x,Y=k,L=1;d&&(L=x/d,Y=h*L),h&&Y>k&&(L=k/h,S=d*L,Y=k),At(f,{width:S,height:Y}),At(f.getElementsByTagName("img")[0],$({width:p*L,height:g*L},le($({translateX:-y*L,translateY:-w*L},t))))}))}},Ia={bind:function(){var t=this.element,a=this.options,i=this.cropper;lt(a.cropstart)&&vt(t,We,a.cropstart),lt(a.cropmove)&&vt(t,He,a.cropmove),lt(a.cropend)&&vt(t,ke,a.cropend),lt(a.crop)&&vt(t,Le,a.crop),lt(a.zoom)&&vt(t,Ie,a.zoom),vt(i,si,this.onCropStart=this.cropStart.bind(this)),a.zoomable&&a.zoomOnWheel&&vt(i,pi,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&vt(i,oi,this.onDblclick=this.dblclick.bind(this)),vt(t.ownerDocument,hi,this.onCropMove=this.cropMove.bind(this)),vt(t.ownerDocument,ci,this.onCropEnd=this.cropEnd.bind(this)),a.responsive&&vt(window,di,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,a=this.options,i=this.cropper;lt(a.cropstart)&&xt(t,We,a.cropstart),lt(a.cropmove)&&xt(t,He,a.cropmove),lt(a.cropend)&&xt(t,ke,a.cropend),lt(a.crop)&&xt(t,Le,a.crop),lt(a.zoom)&&xt(t,Ie,a.zoom),xt(i,si,this.onCropStart),a.zoomable&&a.zoomOnWheel&&xt(i,pi,this.onWheel,{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&xt(i,oi,this.onDblclick),xt(t.ownerDocument,hi,this.onCropMove),xt(t.ownerDocument,ci,this.onCropEnd),a.responsive&&xt(window,di,this.onResize)}},Ya={resize:function(){if(!this.disabled){var t=this.options,a=this.container,i=this.containerData,d=a.offsetWidth/i.width,h=a.offsetHeight/i.height,p=Math.abs(d-1)>Math.abs(h-1)?d:h;if(p!==1){var g,y;t.restore&&(g=this.getCanvasData(),y=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(F(g,function(w,f){g[f]=w*p})),this.setCropBoxData(F(y,function(w,f){y[f]=w*p})))}}},dblclick:function(){this.disabled||this.options.dragMode===Ei||this.setDragMode(xa(this.dragBox,Ae)?Ci:_e)},wheel:function(t){var a=this,i=Number(this.options.wheelZoomRatio)||.1,d=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){a.wheeling=!1},50),t.deltaY?d=t.deltaY>0?1:-1:t.wheelDelta?d=-t.wheelDelta/120:t.detail&&(d=t.detail>0?1:-1),this.zoom(-d*i,t)))},cropStart:function(t){var a=t.buttons,i=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(W(a)&&a!==1||W(i)&&i!==0||t.ctrlKey))){var d=this.options,h=this.pointers,p;t.changedTouches?F(t.changedTouches,function(g){h[g.identifier]=ve(g)}):h[t.pointerId||0]=ve(t),Object.keys(h).length>1&&d.zoomable&&d.zoomOnTouch?p=Mi:p=Ye(t.target,de),da.test(p)&&te(this.element,We,{originalEvent:t,action:p})!==!1&&(t.preventDefault(),this.action=p,this.cropping=!1,p===xi&&(this.cropping=!0,at(this.dragBox,we)))}},cropMove:function(t){var a=this.action;if(!(this.disabled||!a)){var i=this.pointers;t.preventDefault(),te(this.element,He,{originalEvent:t,action:a})!==!1&&(t.changedTouches?F(t.changedTouches,function(d){$(i[d.identifier]||{},ve(d,!0))}):$(i[t.pointerId||0]||{},ve(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var a=this.action,i=this.pointers;t.changedTouches?F(t.changedTouches,function(d){delete i[d.identifier]}):delete i[t.pointerId||0],a&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Zt(this.dragBox,we,this.cropped&&this.options.modal)),te(this.element,ke,{originalEvent:t,action:a}))}}},za={change:function(t){var a=this.options,i=this.canvasData,d=this.containerData,h=this.cropBoxData,p=this.pointers,g=this.action,y=a.aspectRatio,w=h.left,f=h.top,v=h.width,x=h.height,k=w+v,S=f+x,Y=0,L=0,j=d.width,P=d.height,U=!0,st;!y&&t.shiftKey&&(y=v&&x?v/x:1),this.limited&&(Y=h.minLeft,L=h.minTop,j=Y+Math.min(d.width,i.width,i.left+i.width),P=L+Math.min(d.height,i.height,i.top+i.height));var Z=p[Object.keys(p)[0]],D={x:Z.endX-Z.startX,y:Z.endY-Z.startY},I=function(_){switch(_){case It:k+D.x>j&&(D.x=j-k);break;case Yt:w+D.x<Y&&(D.x=Y-w);break;case Rt:f+D.y<L&&(D.y=L-f);break;case Qt:S+D.y>P&&(D.y=P-S);break}};switch(g){case Pe:w+=D.x,f+=D.y;break;case It:if(D.x>=0&&(k>=j||y&&(f<=L||S>=P))){U=!1;break}I(It),v+=D.x,v<0&&(g=Yt,v=-v,w-=v),y&&(x=v/y,f+=(h.height-x)/2);break;case Rt:if(D.y<=0&&(f<=L||y&&(w<=Y||k>=j))){U=!1;break}I(Rt),x-=D.y,f+=D.y,x<0&&(g=Qt,x=-x,f-=x),y&&(v=x*y,w+=(h.width-v)/2);break;case Yt:if(D.x<=0&&(w<=Y||y&&(f<=L||S>=P))){U=!1;break}I(Yt),v-=D.x,w+=D.x,v<0&&(g=It,v=-v,w-=v),y&&(x=v/y,f+=(h.height-x)/2);break;case Qt:if(D.y>=0&&(S>=P||y&&(w<=Y||k>=j))){U=!1;break}I(Qt),x+=D.y,x<0&&(g=Rt,x=-x,f-=x),y&&(v=x*y,w+=(h.width-v)/2);break;case oe:if(y){if(D.y<=0&&(f<=L||k>=j)){U=!1;break}I(Rt),x-=D.y,f+=D.y,v=x*y}else I(Rt),I(It),D.x>=0?k<j?v+=D.x:D.y<=0&&f<=L&&(U=!1):v+=D.x,D.y<=0?f>L&&(x-=D.y,f+=D.y):(x-=D.y,f+=D.y);v<0&&x<0?(g=ce,x=-x,v=-v,f-=x,w-=v):v<0?(g=se,v=-v,w-=v):x<0&&(g=he,x=-x,f-=x);break;case se:if(y){if(D.y<=0&&(f<=L||w<=Y)){U=!1;break}I(Rt),x-=D.y,f+=D.y,v=x*y,w+=h.width-v}else I(Rt),I(Yt),D.x<=0?w>Y?(v-=D.x,w+=D.x):D.y<=0&&f<=L&&(U=!1):(v-=D.x,w+=D.x),D.y<=0?f>L&&(x-=D.y,f+=D.y):(x-=D.y,f+=D.y);v<0&&x<0?(g=he,x=-x,v=-v,f-=x,w-=v):v<0?(g=oe,v=-v,w-=v):x<0&&(g=ce,x=-x,f-=x);break;case ce:if(y){if(D.x<=0&&(w<=Y||S>=P)){U=!1;break}I(Yt),v-=D.x,w+=D.x,x=v/y}else I(Qt),I(Yt),D.x<=0?w>Y?(v-=D.x,w+=D.x):D.y>=0&&S>=P&&(U=!1):(v-=D.x,w+=D.x),D.y>=0?S<P&&(x+=D.y):x+=D.y;v<0&&x<0?(g=oe,x=-x,v=-v,f-=x,w-=v):v<0?(g=he,v=-v,w-=v):x<0&&(g=se,x=-x,f-=x);break;case he:if(y){if(D.x>=0&&(k>=j||S>=P)){U=!1;break}I(It),v+=D.x,x=v/y}else I(Qt),I(It),D.x>=0?k<j?v+=D.x:D.y>=0&&S>=P&&(U=!1):v+=D.x,D.y>=0?S<P&&(x+=D.y):x+=D.y;v<0&&x<0?(g=se,x=-x,v=-v,f-=x,w-=v):v<0?(g=ce,v=-v,w-=v):x<0&&(g=oe,x=-x,f-=x);break;case Di:this.move(D.x,D.y),U=!1;break;case Mi:this.zoom(Ea(p),t),U=!1;break;case xi:if(!D.x||!D.y){U=!1;break}st=Ai(this.cropper),w=Z.startX-st.left,f=Z.startY-st.top,v=h.minWidth,x=h.minHeight,D.x>0?g=D.y>0?he:oe:D.x<0&&(w-=v,g=D.y>0?ce:se),D.y<0&&(f-=x),this.cropped||(Mt(this.cropBox,dt),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}U&&(h.width=v,h.height=x,h.left=w,h.top=f,this.action=g,this.renderCropBox()),F(p,function(G){G.startX=G.endX,G.startY=G.endY})}},Xa={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&at(this.dragBox,we),Mt(this.cropBox,dt),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=$({},this.initialImageData),this.canvasData=$({},this.initialCanvasData),this.cropBoxData=$({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&($(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Mt(this.dragBox,we),at(this.cropBox,dt)),this},replace:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),a?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,F(this.previews,function(i){i.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Mt(this.cropper,ri)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,at(this.cropper,ri)),this},destroy:function(){var t=this.element;return t[q]?(t[q]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.canvasData,d=i.left,h=i.top;return this.moveTo(Oe(t)?t:d+Number(t),Oe(a)?a:h+Number(a))},moveTo:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.canvasData,d=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.movable&&(W(t)&&(i.left=t,d=!0),W(a)&&(i.top=a,d=!0),d&&this.renderCanvas(!0)),this},zoom:function(t,a){var i=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(i.width*t/i.naturalWidth,null,a)},zoomTo:function(t,a,i){var d=this.options,h=this.canvasData,p=h.width,g=h.height,y=h.naturalWidth,w=h.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&d.zoomable){var f=y*t,v=w*t;if(te(this.element,Ie,{ratio:t,oldRatio:p/y,originalEvent:i})===!1)return this;if(i){var x=this.pointers,k=Ai(this.cropper),S=x&&Object.keys(x).length?Ta(x):{pageX:i.pageX,pageY:i.pageY};h.left-=(f-p)*((S.pageX-k.left-h.left)/p),h.top-=(v-g)*((S.pageY-k.top-h.top)/g)}else Ft(a)&&W(a.x)&&W(a.y)?(h.left-=(f-p)*((a.x-h.left)/p),h.top-=(v-g)*((a.y-h.top)/g)):(h.left-=(f-p)/2,h.top-=(v-g)/2);h.width=f,h.height=v,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),W(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var a=this.imageData.scaleY;return this.scale(t,W(a)?a:1)},scaleY:function(t){var a=this.imageData.scaleX;return this.scale(W(a)?a:1,t)},scale:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.imageData,d=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.scalable&&(W(t)&&(i.scaleX=t,d=!0),W(a)&&(i.scaleY=a,d=!0),d&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=this.options,i=this.imageData,d=this.canvasData,h=this.cropBoxData,p;if(this.ready&&this.cropped){p={x:h.left-d.left,y:h.top-d.top,width:h.width,height:h.height};var g=i.width/i.naturalWidth;if(F(p,function(f,v){p[v]=f/g}),t){var y=Math.round(p.y+p.height),w=Math.round(p.x+p.width);p.x=Math.round(p.x),p.y=Math.round(p.y),p.width=w-p.x,p.height=y-p.y}}else p={x:0,y:0,width:0,height:0};return a.rotatable&&(p.rotate=i.rotate||0),a.scalable&&(p.scaleX=i.scaleX||1,p.scaleY=i.scaleY||1),p},setData:function(t){var a=this.options,i=this.imageData,d=this.canvasData,h={};if(this.ready&&!this.disabled&&Ft(t)){var p=!1;a.rotatable&&W(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,p=!0),a.scalable&&(W(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,p=!0),W(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,p=!0)),p&&this.renderCanvas(!0,!0);var g=i.width/i.naturalWidth;W(t.x)&&(h.left=t.x*g+d.left),W(t.y)&&(h.top=t.y*g+d.top),W(t.width)&&(h.width=t.width*g),W(t.height)&&(h.height=t.height*g),this.setCropBoxData(h)}return this},getContainerData:function(){return this.ready?$({},this.containerData):{}},getImageData:function(){return this.sized?$({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,a={};return this.ready&&F(["left","top","width","height","naturalWidth","naturalHeight"],function(i){a[i]=t[i]}),a},setCanvasData:function(t){var a=this.canvasData,i=a.aspectRatio;return this.ready&&!this.disabled&&Ft(t)&&(W(t.left)&&(a.left=t.left),W(t.top)&&(a.top=t.top),W(t.width)?(a.width=t.width,a.height=t.width/i):W(t.height)&&(a.height=t.height,a.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,a;return this.ready&&this.cropped&&(a={left:t.left,top:t.top,width:t.width,height:t.height}),a||{}},setCropBoxData:function(t){var a=this.cropBoxData,i=this.options.aspectRatio,d,h;return this.ready&&this.cropped&&!this.disabled&&Ft(t)&&(W(t.left)&&(a.left=t.left),W(t.top)&&(a.top=t.top),W(t.width)&&t.width!==a.width&&(d=!0,a.width=t.width),W(t.height)&&t.height!==a.height&&(h=!0,a.height=t.height),i&&(d?a.height=a.width/i:h&&(a.width=a.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var a=this.canvasData,i=Na(this.image,this.imageData,a,t);if(!this.cropped)return i;var d=this.getData(t.rounded),h=d.x,p=d.y,g=d.width,y=d.height,w=i.width/Math.floor(a.naturalWidth);w!==1&&(h*=w,p*=w,g*=w,y*=w);var f=g/y,v=St({aspectRatio:f,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),x=St({aspectRatio:f,width:t.minWidth||0,height:t.minHeight||0},"cover"),k=St({aspectRatio:f,width:t.width||(w!==1?i.width:g),height:t.height||(w!==1?i.height:y)}),S=k.width,Y=k.height;S=Math.min(v.width,Math.max(x.width,S)),Y=Math.min(v.height,Math.max(x.height,Y));var L=document.createElement("canvas"),j=L.getContext("2d");L.width=Jt(S),L.height=Jt(Y),j.fillStyle=t.fillColor||"transparent",j.fillRect(0,0,S,Y);var P=t.imageSmoothingEnabled,U=P===void 0?!0:P,st=t.imageSmoothingQuality;j.imageSmoothingEnabled=U,st&&(j.imageSmoothingQuality=st);var Z=i.width,D=i.height,I=h,G=p,_,pt,Et,ut,ft,ot;I<=-g||I>Z?(I=0,_=0,Et=0,ft=0):I<=0?(Et=-I,I=0,_=Math.min(Z,g+I),ft=_):I<=Z&&(Et=0,_=Math.min(g,Z-I),ft=_),_<=0||G<=-y||G>D?(G=0,pt=0,ut=0,ot=0):G<=0?(ut=-G,G=0,pt=Math.min(D,y+G),ot=pt):G<=D&&(ut=0,pt=Math.min(y,D-G),ot=pt);var J=[I,G,_,pt];if(ft>0&&ot>0){var wt=S/g;J.push(Et*wt,ut*wt,ft*wt,ot*wt)}return j.drawImage.apply(j,[i].concat(yi(J.map(function(Lt){return Math.floor(Jt(Lt))})))),L},setAspectRatio:function(t){var a=this.options;return!this.disabled&&!Oe(t)&&(a.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var a=this.options,i=this.dragBox,d=this.face;if(this.ready&&!this.disabled){var h=t===_e,p=a.movable&&t===Ci;t=h||p?t:Ei,a.dragMode=t,pe(i,de,t),Zt(i,Ae,h),Zt(i,Se,p),a.cropBoxMovable||(pe(d,de,t),Zt(d,Ae,h),Zt(d,Se,p))}return this}},Pa=Ct.Cropper,Li=function(){function o(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ta(this,o),!t||!fa.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=$({},fi,Ft(a)&&a),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return ea(o,[{key:"init",value:function(){var a=this.element,i=a.tagName.toLowerCase(),d;if(!a[q]){if(a[q]=this,i==="img"){if(this.isImg=!0,d=a.getAttribute("src")||"",this.originalUrl=d,!d)return;d=a.src}else i==="canvas"&&window.HTMLCanvasElement&&(d=a.toDataURL());this.load(d)}}},{key:"load",value:function(a){var i=this;if(a){this.url=a,this.imageData={};var d=this.element,h=this.options;if(!h.rotatable&&!h.scalable&&(h.checkOrientation=!1),!h.checkOrientation||!window.ArrayBuffer){this.clone();return}if(pa.test(a)){ua.test(a)?this.read(Aa(a)):this.clone();return}var p=new XMLHttpRequest,g=this.clone.bind(this);this.reloading=!0,this.xhr=p,p.onabort=g,p.onerror=g,p.ontimeout=g,p.onprogress=function(){p.getResponseHeader("content-type")!==ui&&p.abort()},p.onload=function(){i.read(p.response)},p.onloadend=function(){i.reloading=!1,i.xhr=null},h.checkCrossOrigin&&mi(a)&&d.crossOrigin&&(a=vi(a)),p.open("GET",a,!0),p.responseType="arraybuffer",p.withCredentials=d.crossOrigin==="use-credentials",p.send()}}},{key:"read",value:function(a){var i=this.options,d=this.imageData,h=La(a),p=0,g=1,y=1;if(h>1){this.url=Sa(a,ui);var w=ka(h);p=w.rotate,g=w.scaleX,y=w.scaleY}i.rotatable&&(d.rotate=p),i.scalable&&(d.scaleX=g,d.scaleY=y),this.clone()}},{key:"clone",value:function(){var a=this.element,i=this.url,d=a.crossOrigin,h=i;this.options.checkCrossOrigin&&mi(i)&&(d||(d="anonymous"),h=vi(i)),this.crossOrigin=d,this.crossOriginUrl=h;var p=document.createElement("img");d&&(p.crossOrigin=d),p.src=h||i,p.alt=a.alt||"The image to crop",this.image=p,p.onload=this.start.bind(this),p.onerror=this.stop.bind(this),at(p,ni),a.parentNode.insertBefore(p,a.nextSibling)}},{key:"start",value:function(){var a=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var d=Ct.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Ct.navigator.userAgent),h=function(w,f){$(a.imageData,{naturalWidth:w,naturalHeight:f,aspectRatio:w/f}),a.initialImageData=$({},a.imageData),a.sizing=!1,a.sized=!0,a.build()};if(i.naturalWidth&&!d){h(i.naturalWidth,i.naturalHeight);return}var p=document.createElement("img"),g=document.body||document.documentElement;this.sizingImage=p,p.onload=function(){h(p.width,p.height),d||g.removeChild(p)},p.src=i.src,d||(p.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",g.appendChild(p))}},{key:"stop",value:function(){var a=this.image;a.onload=null,a.onerror=null,a.parentNode.removeChild(a),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var a=this.element,i=this.options,d=this.image,h=a.parentNode,p=document.createElement("div");p.innerHTML=ga;var g=p.querySelector(".".concat(q,"-container")),y=g.querySelector(".".concat(q,"-canvas")),w=g.querySelector(".".concat(q,"-drag-box")),f=g.querySelector(".".concat(q,"-crop-box")),v=f.querySelector(".".concat(q,"-face"));this.container=h,this.cropper=g,this.canvas=y,this.dragBox=w,this.cropBox=f,this.viewBox=g.querySelector(".".concat(q,"-view-box")),this.face=v,y.appendChild(d),at(a,dt),h.insertBefore(g,a.nextSibling),Mt(d,ni),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,at(f,dt),i.guides||at(f.getElementsByClassName("".concat(q,"-dashed")),dt),i.center||at(f.getElementsByClassName("".concat(q,"-center")),dt),i.background&&at(g,"".concat(q,"-bg")),i.highlight||at(v,sa),i.cropBoxMovable&&(at(v,Se),pe(v,de,Pe)),i.cropBoxResizable||(at(f.getElementsByClassName("".concat(q,"-line")),dt),at(f.getElementsByClassName("".concat(q,"-point")),dt)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),lt(i.ready)&&vt(a,li,i.ready,{once:!0}),te(a,li)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var a=this.cropper.parentNode;a&&a.removeChild(this.cropper),Mt(this.element,dt)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Pa,o}},{key:"setDefaults",value:function(a){$(fi,Ft(a)&&a)}}])}();$(Li.prototype,Ha,Wa,Ia,Ya,za,Xa);document.querySelector("#_preview").innerHTML=`
    <img alt="" id="_image_preview" src="" width="450px">
`;window.addEventListener("DOMContentLoaded",function(){let o=document.getElementById("_btn_upload"),t=document.getElementById("_btn_cut"),a=document.getElementById("_btn_download");document.getElementById("_preview");let i=document.getElementById("_result"),d=document.getElementById("_image_preview"),h=document.createElement("input");h.type="file";var p=new Li(d,{viewMode:1,aspectRatio:1,ready:function(){},zoom:function(g){g.detail.oldRatio===1&&g.preventDefault()}});o.onclick=function(){h.click()},h.onchange=function(){const g=["image/jpeg","image/jpg","image/png","text/plain"];let y=this.files[0];if(!y||!g.includes(y.type)){console.log("format not allowed");return}let w=new FileReader;w.addEventListener("load",f=>{let v=w.result;p.replace(v),t.style.display="inherit"}),w.readAsDataURL(y)},t.onclick=function(){let g=p.getCroppedCanvas(),y=_a(g),w=document.createElement("img");w.style.width="500px",w.style.height="500px",w.src=y.toDataURL(),i.innerHTML="",i.appendChild(w),a.style.display="inherit",a.download="image-cut.png",a.href=y.toDataURL("image/png")}});function _a(o){var t=document.createElement("canvas"),a=t.getContext("2d"),i=o.width,d=o.height;return t.width=i,t.height=d,a.imageSmoothingEnabled=!0,a.drawImage(o,0,0,i,d),a.globalCompositeOperation="destination-in",a.beginPath(),a.fill(),t}
